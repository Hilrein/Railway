{% extends 'base.html' %}
{% load static %}

{% block content %}
<main>
  <div class="hero-section animated fadeIn">
    <h1>ZhibekZholy-–≤–∞—à–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –Ω–∞—à–∏—Ö —Ä—É–∫–∞—Ö!</h1>
    <p class="hero-description">–ü–æ–∫—É–ø–∞–π—Ç–µ –±–∏–ª–µ—Ç—ã –≤ –ª—é–±–æ–π –≥–æ—Ä–æ–¥ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ –±—ã—Å—Ç—Ä–æ –∏ —É–¥–æ–±–Ω–æ</p>
  </div>

  <!-- –£–ª—É—á—à–µ–Ω–Ω—ã–π –±–ª–æ–∫ –ø–æ–∏—Å–∫–∞ –±–∏–ª–µ—Ç–æ–≤ -->
  <div class="search-container animated fadeInUp">
    <form method="POST" action="{% url 'find_trains' %}" class="modern-search-form">
      {% csrf_token %}
      <section id="search" class="search-card">
        <div class="search-header">
          <h2>–ü–æ–∏—Å–∫ –±–∏–ª–µ—Ç–æ–≤</h2>
          <p class="search-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –¥–∞—Ç—É –∏ –∏—â–∏—Ç–µ –±–∏–ª–µ—Ç—ã</p>
        </div>
        
        <div class="search-body">
          <div class="direction-container">
            <div class="direction-field">
              <label class="search-label" for="from_city">
                <span class="icon-wrapper">
                  <span class="departure-icon"></span>
                </span>
                <span>–û—Ç–∫—É–¥–∞:</span>
              </label>
              <select class="search-select" id="from_city" name="from_city" required>
                <option value="" selected disabled hidden>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                {% for from_city in from_city %}
                  <option value="{{ from_city.city }}">{{ from_city.city }}</option>
                {% endfor %}
              </select>
            </div>
            
            <div class="direction-switcher" id="directionSwitcher">
              <button type="button" class="switch-button" aria-label="–ë–∞“ì—ã—Ç—Ç–∞—Ä–¥—ã –∞—É—ã—Å—Ç—ã—Ä—É">
                <span class="switch-icon">‚áÑ</span>
              </button>
            </div>
            
            <div class="direction-field">
              <label class="search-label" for="to_city">
                <span class="icon-wrapper">
                  <span class="arrival-icon"></span>
                </span>
                <span>–ö—É–¥–∞:</span>
              </label>
              <select class="search-select" id="to_city" name="to_city" required>
                <option value="" selected disabled hidden>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                {% for to_city in to_city %}
                  <option value="{{ to_city.city }}">{{ to_city.city }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
          
          <div class="date-container">
            <label class="search-label" for="date">
              <span class="icon-wrapper">
                <span class="calendar-icon"></span>
              </span>
              <span>–î–∞—Ç–∞ –ø–æ–µ–∑–¥–∫–∏:</span>
            </label>
            <input type="date" id="date" name="date" class="search-input" required>
            <div class="date-hint">
              <span id="selectedDateText">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</span>
            </div>
          </div>
        </div>
        
        <div class="search-footer">
          <button type="submit" class="search-button pulse-animation">
            <span class="search-icon"></span>
            <span>–ü–æ–∏—Å–∫ –±–∏–ª–µ—Ç–æ–≤</span>
          </button>
          <div class="search-tips">
            <div class="tip-text">
              <span class="tip-icon">üí°</span>
              <span>–°–æ–≤–µ—Ç: –±—Ä–æ–Ω–∏—Ä—É–π—Ç–µ –±–∏–ª–µ—Ç—ã –∑–∞—Ä–∞–Ω–µ–µ</span>
            </div>
          </div>
        </div>
      </section>
    </form>
  </div>

  <div class="popular-routes">
    <h3>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
    <div class="route-list">
      <div class="route-card">
        <div class="route-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 15V18C4 18.5523 4.44772 19 5 19H19C19.5523 19 20 18.5523 20 18V15" stroke="#007bff" stroke-width="2" stroke-linecap="round"/>
            <rect x="6" y="9" width="12" height="6" rx="1" stroke="#007bff" stroke-width="2"/>
            <path d="M8 9V6C8 4.89543 8.89543 4 10 4H14C15.1046 4 16 4.89543 16 6V9" stroke="#007bff" stroke-width="2"/>
            <circle cx="9" cy="15" r="1" fill="#007bff"/>
            <circle cx="15" cy="15" r="1" fill="#007bff"/>
          </svg>
        </div>
        <div class="route-cities">
          <div class="route-info">
            <span>–ê—Å—Ç–∞–Ω–∞</span>
            <span class="route-arrow">‚Üí</span>
            <span>–ê–ª–º–∞—Ç—ã</span>
          </div>
        </div>
        <div class="route-details">
          <div class="route-time"><i class="time-icon"></i>15 —á–∞—Å–æ–≤</div>
          <div class="route-distance"><i class="distance-icon"></i>1300 –∫–º</div>
        </div>
        <div class="route-price">12,000 ‚Ç∏</div>
        <a href="#" class="route-button">–í—ã–±—Ä–∞—Ç—å</a>
      </div>

      <div class="route-card">
        <div class="route-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 15V18C4 18.5523 4.44772 19 5 19H19C19.5523 19 20 18.5523 20 18V15" stroke="#007bff" stroke-width="2" stroke-linecap="round"/>
            <rect x="6" y="9" width="12" height="6" rx="1" stroke="#007bff" stroke-width="2"/>
            <path d="M8 9V6C8 4.89543 8.89543 4 10 4H14C15.1046 4 16 4.89543 16 6V9" stroke="#007bff" stroke-width="2"/>
            <circle cx="9" cy="15" r="1" fill="#007bff"/>
            <circle cx="15" cy="15" r="1" fill="#007bff"/>
          </svg>
        </div>
        <div class="route-cities">
          <div class="route-info">
            <span>–ö–∞—Ä–∞–≥–∞–Ω–¥–∞</span>
            <span class="route-arrow">‚Üí</span>
            <span>–ê—Å—Ç–∞–Ω–∞</span>
          </div>
        </div>
        <div class="route-details">
          <div class="route-time"><i class="time-icon"></i> 4 —á–∞—Å–∞</div>
          <div class="route-distance"><i class="distance-icon"></i>220 –∫–º</div>
        </div>
        <div class="route-price">8,500 ‚Ç∏</div>
        <a href="#" class="route-button">–í—ã–±—Ä–∞—Ç—å</a>
      </div>

      <div class="route-card">
        <div class="route-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 15V18C4 18.5523 4.44772 19 5 19H19C19.5523 19 20 18.5523 20 18V15" stroke="#007bff" stroke-width="2" stroke-linecap="round"/>
            <rect x="6" y="9" width="12" height="6" rx="1" stroke="#007bff" stroke-width="2"/>
            <path d="M8 9V6C8 4.89543 8.89543 4 10 4H14C15.1046 4 16 4.89543 16 6V9" stroke="#007bff" stroke-width="2"/>
            <circle cx="9" cy="15" r="1" fill="#007bff"/>
            <circle cx="15" cy="15" r="1" fill="#007bff"/>
          </svg>
        </div>
        <div class="route-cities">
          <div class="route-info">
            <span>–ê–ª–º–∞—Ç—ã</span>
            <span class="route-arrow">‚Üí</span>
            <span>–®—ã–º–∫–µ–Ω—Ç</span>
          </div>
        </div>
        <div class="route-details">
          <div class="route-time"><i class="time-icon"></i>10 —á–∞—Å–æ–≤</div>
          <div class="route-distance"><i class="distance-icon"></i>700 –∫–º</div>
        </div>
        <div class="route-price">10,500 ‚Ç∏</div>
        <a href="#" class="route-button">–í—ã–±—Ä–∞—Ç—å</a>
      </div>
    </div>
  </div>

  <div class="benefits-section">
    <h3>–ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</h3>
    <div class="benefits-container">
      <div class="benefit-card">
        <div class="benefit-icon">
          <i class="benefit-icon-fast"></i>
        </div>
        <h4>–ë—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h4>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ –∏ –∫—É–ø–∏—Ç–µ –±–∏–ª–µ—Ç –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç</p>
      </div>
      
      <div class="benefit-card">
        <div class="benefit-icon">
          <i class="benefit-icon-price"></i>
        </div>
        <h4>–í—ã–≥–æ–¥–Ω—ã–µ —Ü–µ–Ω—ã</h4>
        <p>–ú—ã –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ª—É—á—à–∏–µ —Ü–µ–Ω—ã</p>
      </div>
      
      <div class="benefit-card">
        <div class="benefit-icon">
          <i class="benefit-icon-support"></i>
        </div>
        <h4>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7</h4>
        <p>–ù–∞—à–∞ —Å–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤–∞ –ø–æ–º–æ—á—å</p>
      </div>
    </div>
  </div>
</main>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    function animateElements() {
      const elements = document.querySelectorAll('.animated');
      elements.forEach((element, index) => {
        setTimeout(() => {
          element.classList.add('visible');
        }, 200 * index);
      });
    }
    
    animateElements();
    
    // –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
    const directionSwitcher = document.getElementById('directionSwitcher');
    if (directionSwitcher) {
      directionSwitcher.addEventListener('click', function() {
        const fromCity = document.getElementById('from_city');
        const toCity = document.getElementById('to_city');
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
        const fromValue = fromCity.value;
        const toValue = toCity.value;
        
        // –ú–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –º–µ—Å—Ç–∞–º–∏
        fromCity.value = toValue;
        toCity.value = fromValue;
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏
        this.classList.add('rotate');
        setTimeout(() => {
          this.classList.remove('rotate');
        }, 500);
      });
    }
    
    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–∞—Ç—ã –≤ –ø–æ–Ω—è—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
    const dateInput = document.getElementById('date');
    const selectedDateText = document.getElementById('selectedDateText');
    
    if (dateInput && selectedDateText) {
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É - —Å–µ–≥–æ–¥–Ω—è
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth() + 1).padStart(2, '0');
      const dd = String(today.getDate()).padStart(2, '0');
      dateInput.min = `${yyyy}-${mm}-${dd}`;
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞—Ç—ã
      dateInput.addEventListener('change', function() {
        if (this.value) {
          const dateParts = this.value.split('-');
          const year = dateParts[0];
          const month = dateParts[1];
          const day = dateParts[2];
          
          // –ù–∞–∑–≤–∞–Ω–∏—è –º–µ—Å—è—Ü–µ–≤ –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º
const monthNames = [
  '—è–Ω–≤–∞—Ä—å', '—Ñ–µ–≤—Ä–∞–ª—å', '–º–∞—Ä—Ç', '–∞–ø—Ä–µ–ª—å', '–º–∞–π', '–∏—é–Ω—å',
  '–∏—é–ª—å', '–∞–≤–≥—É—Å—Ç', '—Å–µ–Ω—Ç—è–±—Ä—å', '–æ–∫—Ç—è–±—Ä—å', '–Ω–æ—è–±—Ä—å', '–¥–µ–∫–∞–±—Ä—å'
];
          const monthName = monthNames[parseInt(month) - 1];
          selectedDateText.textContent = `${day} ${monthName}, ${year} –≥.`;
          
          // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
          selectedDateText.classList.add('date-selected');
        } else {
          selectedDateText.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–Ω—å';
          selectedDateText.classList.remove('date-selected');
        }
      });
    }
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
    const searchButton = document.querySelector('.search-button');
    if (searchButton) {
      searchButton.addEventListener('mouseover', function() {
        this.classList.add('pulse');
      });
      
      searchButton.addEventListener('mouseout', function() {
        this.classList.remove('pulse');
      });
    }
  });
</script>
{% endblock content %}

<style>
  .search-header h2 {
    font-family: 'Arial Black', Arial, sans-serif; /* –ù–∞–ø—Ä–∏–º–µ—Ä, –∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç Arial Black */
    color:rgb(18, 37, 57); /* –Ø—Ä–∫–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π —Ü–≤–µ—Ç ‚Äî –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –Ω–∞ –ª—é–±–æ–π */
  }
</style>